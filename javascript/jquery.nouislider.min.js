(function(a){a.fn.noUiSlider=function(i,h){function g(k,n,o){var m=n.data("setup"),j=m.handles;n=m.settings;m=m.pos;k=0>k?0:100<k?100:k;2==n.handles&&(o.is(":first-child")?(o=parseFloat(j[1][0].style[m])-n.margin,k=k>o?o:k):(o=parseFloat(j[0][0].style[m])+n.margin,k=k<o?o:k));n.step&&(o=b.from(n.range,n.step),k=Math.round(k/o)*o);return k}function f(j){try{return[j.clientX||j.originalEvent.clientX||j.originalEvent.touches[0].clientX,j.clientY||j.originalEvent.clientY||j.originalEvent.touches[0].clientY]}catch(k){return["x","y"]}}var e=window.navigator.msPointerEnabled?2:"ontouchend" in document?3:1;window.debug&&console&&console.log(e);var b={to:function(j,k){k=0>j[0]?k+Math.abs(j[0]):k-j[0];return 100*k/this._length(j)},from:function(j,k){return 100*k/this._length(j)},is:function(j,k){return k*this._length(j)/100+j[0]},_length:function(j){return j[0]>j[1]?j[0]-j[1]:j[1]-j[0]}},c={handles:2,serialization:{to:["",""],resolution:0.01}};methods={create:function(){return this.each(function(){var x=a.extend(c,i),t=a(this).data("_isnS_",!0),u=[],s,n,w="",p=function(k){return !isNaN(parseFloat(k))&&isFinite(k)},o=(x.serialization.resolution=x.serialization.resolution||0.01).toString().split("."),m=1==o[0]?0:o[1].length;x.start=p(x.start)?[x.start,0]:x.start;a.each(x,function(k,l){p(l)?x[k]=parseFloat(l):"object"==typeof l&&p(l[0])&&(l[0]=parseFloat(l[0]),p(l[1])&&(l[1]=parseFloat(l[1])));var q=!1;l="undefined"==typeof l?"x":l;switch(k){case"range":case"start":q=2!=l.length||!p(l[0])||!p(l[1]);break;case"handles":q=1>l||2<l||!p(l);break;case"connect":q="lower"!=l&&"upper"!=l&&"boolean"!=typeof l;break;case"orientation":q="vertical"!=l&&"horizontal"!=l;break;case"margin":case"step":q="undefined"!=typeof l&&!p(l);break;case"serialization":q="object"!=typeof l||!p(l.resolution)||"object"==typeof l.to&&l.to.length<x.handles;break;case"slide":q="function"!=typeof l}q&&console&&console.error("Bad input for "+k+" on slider:",t)});x.margin=x.margin?b.from(x.range,x.margin):0;if(x.serialization.to instanceof jQuery||"string"==typeof x.serialization.to||!1===x.serialization.to){x.serialization.to=[x.serialization.to]}"vertical"==x.orientation?(w+="vertical",s="top",n=1):(w+="horizontal",s="left",n=0);w+=x.connect?"lower"==x.connect?" connect lower":" connect":"";t.addClass(w);for(w=0;w<x.handles;w++){u[w]=t.append("<a><div></div></a>").children(":last");o=b.to(x.range,x.start[w]);u[w].css(s,o+"%");100==o&&u[w].is(":first-child")&&u[w].css("z-index",2);var o=(1===e?"mousedown":2===e?"MSPointerDown":"touchstart")+".noUiSliderX",j=(1===e?"mousemove":2===e?"MSPointerMove":"touchmove")+".noUiSlider",y=(1===e?"mouseup":2===e?"MSPointerUp":"touchend")+".noUiSlider";u[w].find("div").on(o,function(l){a("body").bind("selectstart.noUiSlider",function(){return !1});if(!t.hasClass("disabled")){a("body").addClass("TOUCH");var A=a(this).addClass("active").parent(),z=A.add(a(document)).add("body"),q=parseFloat(A[0].style[s]),v=f(l),r=v,B=!1;a(document).on(j,function(k){k.preventDefault();k=f(k);if("x"!=k[0]){k[0]-=v[0];k[1]-=v[1];var E=[r[0]!=k[0],r[1]!=k[1]],D=q+100*k[n]/(n?t.height():t.width()),D=g(D,t,A);if(E[n]&&D!=B){A.css(s,D+"%").data("input").val(b.is(x.range,D).toFixed(m));var E=x.slide,C=t.data("_n",!0);"function"===typeof E&&E.call(C,void 0);B=D;A.css("z-index",2==u.length&&100==D&&A.is(":first-child")?2:1)}r=k}}).on(y,function(){z.off(".noUiSlider");a("body").removeClass("TOUCH");t.find(".active").removeClass("active").end().data("_n")&&t.data("_n",!1).change()})}}).on("click",function(k){k.stopPropagation()})}if(1==e){t.on("click",function(k){if(!t.hasClass("disabled")){var l=f(k);k=100*(l[n]-t.offset()[s])/(n?t.height():t.width());l=1<u.length?l[n]<(u[0].offset()[s]+u[1].offset()[s])/2?u[0]:u[1]:u[0];k=g(k,t,l);l.css(s,k+"%").data("input").val(b.is(x.range,k).toFixed(m));k=x.slide;"function"===typeof k&&k.call(t,void 0);t.change()}})}for(w=0;w<u.length;w++){o=b.is(x.range,parseFloat(u[w][0].style[s])).toFixed(m),"string"==typeof x.serialization.to[w]?u[w].data("input",t.append('<input type="hidden" name="'+x.serialization.to[w]+'">').find("input:last").val(o).change(function(k){k.stopPropagation()})):!1==x.serialization.to[w]?u[w].data("input",{val:function(k){if("undefined"!=typeof k){this.handle.data("noUiVal",k)}else{return this.handle.data("noUiVal")}},handle:u[w]}):u[w].data("input",x.serialization.to[w].data("handleNR",w).val(o).change(function(){var k=[null,null];k[a(this).data("handleNR")]=a(this).val();t.val(k)}))}a(this).data("setup",{settings:x,handles:u,pos:s,res:m})})},val:function(j){if("undefined"!==typeof j){var l="number"==typeof j?[j]:j;return this.each(function(){for(var o=a(this).data("setup"),n=0;n<o.handles.length;n++){if(null!=l[n]){var p=g(b.to(o.settings.range,l[n]),a(this),o.handles[n]);o.handles[n].css(o.pos,p+"%").data("input").val(b.is(o.settings.range,p).toFixed(o.res))}}})}j=a(this).data("setup").handles;for(var m=[],k=0;k<j.length;k++){m.push(parseFloat(j[k].data("input").val()))}return 1==m.length?m[0]:m},disabled:function(){return h?a(this).addClass("disabled"):a(this).removeClass("disabled")}};var d=jQuery.fn.val;jQuery.fn.val=function(){return this.data("_isnS_")?methods.val.apply(this,arguments):d.apply(this,arguments)};return"disabled"==i?methods.disabled.apply(this):methods.create.apply(this)}})(jQuery);